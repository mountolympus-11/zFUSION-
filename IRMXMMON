IRMXMMON TITLE '- RESOURCE MANAGER: $MONMSG LOCAL/GLOBAL QUEUE CLEANUP' 00010000
**<DOC-ON>*****************************************************         00020000
*                                                                       00030000
* ROUTINE: IRMXMMON - Resource mgr: $MONMSG local/global Q cleanup      00040000
*                                                                       00050000
* DESCRIPTION:                                                          00060000
*                                                                       00070000
*    This routine serves as a resource manager for the local and        00080000
*    global $MSG monitor ($MONMSG) queues.  It issues a $MSGMON         00090000
*    RESET to remove all local and global queue entries created         00100000
*    on behalf of the terminating workunit (ITASK or process).          00110000
*                                                                       00120000
* ON ENTRY:                                                             00130000
*                                                                       00140000
*    R0  contains the address of the terminating workunit               00150000
*                                                                       00160000
* ON EXIT:                                                              00170000
*                                                                       00180000
*    R15 contains zero                                                  00190000
*                                                                       00200000
**<DOC-OFF>****************************************************         00210000
                                                                        00220000
         EJECT                                                          00230000
***************************************************************         00240000
*                                                                       00250000
* MAINTENANCE:                                                          00260000
*                                                                       00270000
*   09/06/94  R. Turgeon                                                00280000
*             Initial version                                           00290000
*                                                                       00300000
***************************************************************         00310000
                                                                        00320000
         EJECT                                                          00330000
         #WORK ,                                                        00340000
         #ENDWORK ,                                                     00350000
                                                                        00360000
         EJECT                                                          00370000
         $MSGMON DSECT=YES        $MSG MONITOR INTERFACES               00380000
                                                                        00390000
         EJECT                                                          00400000
         EQUS  ,                  GENERAL EQUATES                       00410000
                                                                        00420000
         EJECT                                                          00430000
IRMXMMON #ENTER ,                                                       00440000
                                                                        00450000
         USING ITASK,R10          STDENV                                00460000
                                                                        00470000
*--------------------------------------------------------------         00480000
*   RELEASE ALL MESSAGE MONITOR ENTRIES CREATED BY WORKUNIT             00490000
*--------------------------------------------------------------         00500000
         $MSGMON RESET,MF=(E,MFE_LIST)                                  00510000
                                                                        00520000
*--------------------------------------------------------------         00530000
*   RETURN                                                              00540000
*--------------------------------------------------------------         00550000
         #EXIT ,                                                        00560000
                                                                        00570000
         EJECT                                                          00580000
***************************************************************         00590000
*                                                                       00600000
*   LOCAL READ ONLY DATA AREAS, ETC.                                    00610000
*                                                                       00620000
***************************************************************         00630000
         LTORG ,                                                        00640000
                                                                        00650000
         PRINT NOGEN                                                    00660000
         ICVT  ,                                                        00670000
         ITASK ,                                                        00680000
         END   ,                                                        00690000
