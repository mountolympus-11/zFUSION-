ISRVTDSP TITLE '- Task restart routine - CALLDSP'                       00010000
**<DOC-ON>******************************************************        00020000
*                                                                       00030000
* ROUTINE: ISRVTDSP - Task restart routine - CALLDSP                    00040000
*                                                                       00050000
* DESCRIPTION:                                                          00060000
*                                                                       00070000
*    This routine is called to restart an ITASK running under a         00080000
*    server.  When the ITASK relinquishes control to the server         00090000
*    using a $SERVER CALLDSP, the address of this restart               00100000
*    routine is placed in the ITASK.  This routine is called by         00110000
*    the server dispatcher when the task is ready to be                 00120000
*    dispatched on the server.  The task manger dispatch is             00130000
*    entered using a $TASK CALLDSP to dispatch a ready workunit         00140000
*    on ITASK.                                                          00150000
*                                                                       00160000
* ON ENTRY:                                                             00170000
*                                                                       00180000
*    No special entry conventions.  R10 contains the address            00190000
*    of the task to be resumed.                                         00200000
*                                                                       00210000
* ON EXIT:                                                              00220000
*                                                                       00230000
*    Control is passed of the task manager dispatcher via               00240000
*    a $TASK CALLDSP request.                                           00250000
*                                                                       00260000
* MODE:                                                                 00270000
*                                                                       00280000
*    TASK                                                               00290000
*    APF/NON-APF                                                        00300000
*    SUP/PROB                                                           00310000
*    AMODE 31, RMODE ANY                                                00320000
*                                                                       00330000
**<DOC-OFF>*****************************************************        00340000
                                                                        00350000
         EJECT ,                                                        00360000
****************************************************************        00370000
*                                                                       00380000
* MAINTENANCE:                                                          00390000
*                                                                       00400000
*   01/21/95 Ron Colmone          Par# 159456                           00410000
*            Initial Version                                            00420000
*                                                                       00430000
****************************************************************        00440000
                                                                        00450000
         EJECT ,                                                        00460000
         $TASK DSECT=YES          TASK MANAGER PLIST                    00470000
                                                                        00480000
         EJECT ,                                                        00490000
         EQUS  ,                  GENERAL EQUATES                       00500000
*                                                                       00510000
         TRACODES ,               TRACE CODES                           00520000
                                                                        00530000
         EJECT ,                                                        00540000
         #WORK LENGTH=512                                               00550000
         #ENDWORK                                                       00560000
                                                                        00570000
         EJECT ,                                                        00580000
ISRVTDSP #ENTER BASE=(R12),       ENTRY LINKAGE                        +00590000
               PREG=R8,                                                +00600000
               WAPASS=YES                                               00610000
                                                                        00620000
         USING ITASK,R10          ESTABLISH ADDRESSABILITY              00630000
                                                                        00640000
*---------------------------------------------------------------        00650000
*  Cut trace record for ITASK issuing CALLDSP                           00660000
*---------------------------------------------------------------        00670000
         $TRACE TRC_DISPSVTCAL,0  TRACE TASK RESTART - CALLDSP          00680000
                                                                        00690000
*---------------------------------------------------------------        00700000
*  Enter Server CALLDSP service to swap ITASKs. (No return)             00710000
*---------------------------------------------------------------        00720000
         LA    R13,TSKDSPSA       ADDRESS OF DISPATCHER SAVEAREA        00730000
                                                                        00740000
         $TASK CALLDSP,           PASS CONTROL TO TASK DISPATCHER      +00750000
               WORKA=*TSK@WRKA,                                        +00760000
               MF=(E,TSKT_MFL)                                          00770000
                                                                        00780000
         EJECT ,                                                        00790000
****************************************************************        00800000
*                                                                       00810000
*  CONSTANTS AND LITERALS                                               00820000
*                                                                       00830000
****************************************************************        00840000
                                                                        00850000
         LTORG ,                                                        00860000
                                                                        00870000
         PRINT NOGEN                                                    00880000
         ICVT  ,                                                        00890000
         ITASK ,                                                        00900000
                                                                        00910000
         END   ,                                                        00920000
