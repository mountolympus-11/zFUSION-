ITVBRDEL TITLE '- DELETE TVBR VECTOR AND ASSOCIATED AREAS'              00010000
**<DOC-ON>*****************************************************         00020000
*                                                                       00030000
* ROUTINE:  ITVBRDEL - Delete TVBR vector and associated areas          00040000
*                                                                       00050000
* DESCRIPTION:                                                          00060000
*                                                                       00070000
*    This routine is used to delete the TVBR vector and its             00080000
*    associated data areas listed below.  As such, this routine         00090000
*    can be used as a TBBR vector resource manager.                     00100000
*                                                                       00110000
*       WRIVEC    ($RETSTOR)                                            00120000
*       TVBRVEC   ($RETSTOR)                                            00130000
*                                                                       00140000
*                                                                       00150000
* ON ENTRY:                                                             00160000
*                                                                       00170000
*    R1 - addr of TVBR vector                                           00180000
*                                                                       00190000
*                                                                       00200000
* ON EXIT:                                                              00210000
*                                                                       00220000
*    R15 contains zero                                                  00230000
*                                                                       00240000
**<DOC-OFF>****************************************************         00250000
                                                                        00260000
         EJECT ,                                                        00270000
***************************************************************         00280000
*                                                                       00290000
*  MAINTENANCE:                                                         00300000
*                                                                       00310000
*    01/25/94 R. Turgeon                                                00320000
*             Initial version                                           00330000
*                                                                       00340000
***************************************************************         00350000
                                                                        00360000
         EJECT                                                          00370000
         #WORK ,                       READ/WRITE WORKAREA              00380000
         #ENDWORK ,                                                     00390000
                                                                        00400000
         EJECT                                                          00410000
         TVBRVEC  ,                    TRANSVERSE VARS BY RGN VECTOR    00420000
                                                                        00430000
         EJECT                                                          00440000
         EQUS  ,                       GENERAL EQUATES                  00450000
                                                                        00460000
         EJECT                                                          00470000
ITVBRDEL #ENTER PREG=(R8)                                               00480000
                                                                        00490000
         USING ITASK,R10               STD ENV                          00500000
                                                                        00510000
         USING TVBRVEC,R8              TVBR VECTOR FORMAT               00520000
         LTR   R8,R8                   BLOCK PROVIDED?                  00530000
         BZ    RETURN                  DONE IF NOT                      00540000
                                                                        00550000
*--------------------------------------------------------------         00560000
*   Delete wrap imaging support structures including WRIVEC             00570000
*--------------------------------------------------------------         00580000
                                                                        00590000
         ICM   R0,15,TVBWRI            WRIVEC PRESENT?                  00600000
         BZ    EWRIVEC                 DONE HERE IF NOT                 00610000
                                                                        00620000
         @CALL IRGNWRFR,(TVBWRI),      RELEASE WRIVEC STRUCTURES       X00630000
               CTYPE=CVT,                                              X00640000
               MF=(E,MFE_LIST)                                          00650000
                                                                        00660000
EWRIVEC  DS    0H                                                       00670000
                                                                        00680000
*--------------------------------------------------------------         00690000
*   Delete TVBR vector                                                  00700000
*--------------------------------------------------------------         00710000
                                                                        00720000
         $RETSTOR (R8)                 RELEASE TVBR VECTOR PROPER       00730000
                                                                        00740000
*--------------------------------------------------------------         00750000
*   Return to requestor                                                 00760000
*--------------------------------------------------------------         00770000
                                                                        00780000
RETURN   DS    0H                                                       00790000
         SR    R15,R15                 RETURN CODES NOT DEFINED         00800000
         #EXIT ,                                                        00810000
                                                                        00820000
         EJECT                                                          00830000
***************************************************************         00840000
*                                                                       00850000
*   Local read only storage                                             00860000
*                                                                       00870000
***************************************************************         00880000
                                                                        00890000
         LTORG ,                                                        00900000
                                                                        00910000
         PRINT NOGEN                                                    00920000
         ICVT  ,                                                        00930000
         ITASK ,                                                        00940000
         END   ,                                                        00950000
