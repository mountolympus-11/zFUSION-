IVTMUSIR TITLE 'INTEGRATOR - IVUSER SESSION INITIATION REQUEST'         00010000
**<DOC-ON>************************************************************* 00020000
*                                                                       00030000
* ROUTINE: IVTMUSIR - IVUSER SESSION INITIATION REQUEST PROCESSOR       00040000
*                                                                       00050000
* DESCRIPTION:                                                          00060000
*                                                                       00070000
* ON ENTRY:                                                             00080000
*                                                                       00090000
*    R15 = ENTRY POINT ADDRESS                                          00100000
*    R14 = RETURN ADDRESS                                               00110000
*    R13 = AVAILABLE SAVE AREA                                          00120000
*    R11 = ICVT ADDRESS                                                 00130000
*    R10 = ITASK ADDRESS                                                00140000
*    R09 = IVTAMCVT ADDRESS                                             00150000
*    R08 = IVUSER ADDRESS                                               00160000
*    R01 = ADDRESS OF LOGON WORK ELEMENT (IWE)                          00170000
*                                                                       00180000
* ON EXIT:                                                              00190000
*                                                                       00200000
*    R15 = 0                                                            00210000
*    R00 = 0                                                            00220000
*    R01 = 0                                                            00230000
*                                                                       00240000
*    ALL OTHER REGISTERS ARE RESTORED.                                  00250000
*                                                                       00260000
**<DOC-OFF>************************************************************ 00270000
                                                                        00280000
         EJECT ,                                                        00290000
*********************************************************************** 00300000
*                                                                       00310000
* MAINTENANCE:                                                          00320000
*                                                                       00330000
*   08/01/93 RANDY WITEK                                                00340000
*                                                                       00350000
*********************************************************************** 00360000
                                                                        00370000
         EQUS  ,                  GENERAL EQUATES                       00380000
                                                                        00390000
RICVT    EQU   R11                                                      00400000
RITASK   EQU   R10                                                      00410000
RIVTAM   EQU   R9                                                       00420000
RIVUSER  EQU   R8                                                       00430000
RIWE     EQU   R7                                                       00440000
RISESS   EQU   R6                                                       00450000
RIRPL    EQU   R5                                                       00460000
                                                                        00470000
         USING ICVT,RICVT         ESTABLISH ADDRESSABILITY              00480000
         USING ITASK,RITASK       ESTABLISH ADDRESSABILITY              00490000
         USING IVTAMCVT,RIVTAM    ESTABLISH ADDRESSABILITY              00500000
         USING IVUSER,RIVUSER     ESTABLISH ADDRESSABILITY              00510000
         USING IWEVTAM,RIWE       ESTABLISH ADDRESSABILITY              00520000
         USING ISESS,RISESS       ESTABLISH ADDRESSABILITY              00530000
         USING IRPL,RIRPL         ESTABLISH ADDRESSABILITY              00540000
                                                                        00550000
WORKAREA #WORK ,                  READ/WRITE WORKAREA                   00560000
$TASKMFL $TASK MF=L               $TASK PLIST CONSTRUCTION              00570000
$PROCMFL $PROC MF=L               $PROC PLIST CONSTRUCTION              00580000
$SESSMFL $SESS MF=L               $SESS PLIST CONSTRUCTION              00590000
WRK256   DS    XL256              GENERAL WORKAREA                      00600000
BASELEN  DS    F                  BASIC LENGTH OF ISESS BLOCK           00610000
RETR15   DS    F                                                        00620000
RETR0    DS    F                                                        00630000
RETR1    DS    F                                                        00640000
RETREGS  EQU   RETR15,*-RETR15    INCLUSIVE SYMBOL                      00650000
WORKLEN  #ENDWORK                 END OF WORKAREA                       00660000
                                                                        00670000
         $MSGDFT PREFIX=ICTPID,                                        +00680000
               COMPID='VTM',                                           +00690000
               TABLE=*#MSGS,                                           +00700000
               WORKA=0,                                                +00710000
               MF=(E,WRK256),                                          +00720000
               PRINT=NOGEN                                              00730000
                                                                        00740000
IVTMUSIR #ENTER BASE=R12,         ENTRY LINKAGE                        +00750000
               PREG=RIWE,                                              +00760000
               AMODE=31,                                               +00770000
               RMODE=ANY                                                00780000
                                                                        00790000
*---------------------------------------------------------------------- 00800000
* PROCESS A SESSION INITIATION REQUEST                                  00810000
*---------------------------------------------------------------------- 00820000
                                                                        00830000
                                                                        00840000
*---------------------------------------------------------------------- 00850000
* RETURN TO CALLER                                                      00860000
*---------------------------------------------------------------------- 00870000
                                                                        00880000
RETURN   DS    0H                                                       00890000
                                                                        00900000
         LM    R15,R1,RETREGS     LOAD RETURNS                          00910000
                                                                        00920000
         #EXIT R1=YES             RETURN W/R15,R0,R1                    00930000
                                                                        00940000
*---------------------------------------------------------------------- 00950000
* ERROR ROUTINES                                                        00960000
*---------------------------------------------------------------------- 00970000
                                                                        00980000
ERR$TASK DS    0H                                                       00990000
                                                                        01000000
         $ABEND ABE_VTDIAG,                                            +01010000
               SCOPE=ITASK,                                            +01020000
               TITLE='$TASK FAILURE'                                    01030000
                                                                        01040000
*---------------------------------------------------------------------- 01050000
*  CONSTANTS AND LITERALS                                               01060000
*---------------------------------------------------------------------- 01070000
                                                                        01080000
         LTORG ,                                                        01090000
         PRINT NOGEN                                                    01100000
         IHAPSA ,                 MVS PREFIXED SAVE AREA                01110000
         ISTDBIND ,               VTAM BIND IMAGE                       01120000
         ICVT  ,                  INTEGRATOR CVT                        01130000
         IVTAMCVT ,               INTEGRATOR VTAM CVT                   01140000
         IRPL ,                   INTEGRATOR VTAM RPL+                  01150000
         IACB ,                   INTEGRATOR VTAM ACB+                  01160000
         INIB ,                   INTEGRATOR VTAM NIB+                  01170000
         ISESS ,                  INTEGRATOR SESSION BLOCK              01180000
         IRQE ,                   INTEGRATOR RECEIVE QUEUE ELEMENT      01190000
         IVUSER ,                 INTEGRATOR VTAM USER BLOCK            01200000
         ITASK ,                  INTEGRATOR TASK BLOCK                 01210000
         IWEVTAM ,                INTEGRATOR VTAM WORK ELEMENT          01220000
         TMSG  ,                  INTEGRATOR INTERTASK MSG FORMAT       01230000
         EVCODES ,                INTEGRATOR EVENT CODES                01240000
         ABCODES ,                INTEGRATOR $ABEND CODES               01250000
         MSGCODES ,               INTEGRATOR INTERTASK MSGING CODES     01260000
         @EPB ,                   INTEGRATOR EVENT PROCESS BLOCK        01270000
         $TASK DSECT=YES          INTEGRATOR $TASK SERVICES             01280000
         $PROC DSECT=YES          INTEGRATOR $PROC SERVICES             01290000
         $VTAM DSECT=YES          INTEGRATOR $VTAM SERVICES             01300000
         $SESS DSECT=YES          INTEGRATOR $SESS SERVICES             01310000
         IFGEXLST ,               VTAM EXIT LIST                        01320000
         END   ,                                                        01330000
