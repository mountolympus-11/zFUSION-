IMNTCTLG TITLE ' - SET TABLE MAINTENANCE FLAG'                          00010000
**<DOC-ON>*****************************************************         00020000
*                                                                       00030000
* ROUTINE: IMNTCTLG - SET TABLE MAINTENANCE FLAG                        00040000
*                                                                       00050000
* DESCRIPTION:                                                          00060000
*                                                                       00070000
*    This routine will locate the catalog maintenance table             00080000
*    entry associated with the update catalog table.  If the            00090000
*    catalog table is located successfully the associated               00100000
*    maintenance flag is set accordingly.                               00110000
*                                                                       00120000
* ON ENTRY:                                                             00130000
*                                                                       00140000
*    R1 contains the address of the parameter list as follows:          00150000
*                                                                       00160000
*        +00  - Address of catalog table name                           00170000
*                                                                       00180000
* ON EXIT:                                                              00190000
*                                                                       00200000
*    R15 contains one of the following return codes:                    00210000
*                                                                       00220000
*        RC00 - Catalog Table Maintenance flag set                      00230000
*        RC04 - Catalog Table not found                                 00240000
*                                                                       00250000
**<DOC-OFF>****************************************************         00260000
                                                                        00270000
         EJECT ,                                                        00280000
***************************************************************         00290000
*                                                                       00300000
* MAINTENANCE:                                                          00310000
*                                                                       00320000
*   02/XX/93  RON COLMONE                                               00330000
*             INITIAL VERSION                                           00340000
*                                                                       00350000
*   08/05/93  RON COLMONE                                               00360000
*             CONVERTED TO NEW ENVIRONMENT                              00370000
*                                                                       00380000
***************************************************************         00390000
                                                                        00400000
         EJECT ,                                                        00410000
         EQUS  ,                  GENERAL EQUATES                       00420000
                                                                        00430000
         EJECT ,                                                        00440000
         $MNTCAT TYPE=DSECT       CATALOG MAINT TABLE MAPPINGS          00450000
                                                                        00460000
         EJECT ,                                                        00470000
         #WORK ,                  READ/WRITE WORKAREA                   00480000
         #ENDWORK ,               END OF WORKAREA                       00490000
                                                                        00500000
         EJECT ,                                                        00510000
IMNTCTLG #ENTER BASE=R12,PREG=R8                                        00520000
                                                                        00530000
         USING ITASK,R10          ITASK ADDRESSABILITY                  00540000
         L     R9,TSKPCBC         ADDRESS OF CURRENT PCB                00550000
         USING IPCB,R9            IPCB  ADDRESSABILITY                  00560000
                                                                        00570000
         L     R5,0(,R8)          ADDR OF PROJECT NAME                  00580000
                                                                        00590000
*--------------------------------------------------------------         00600000
                                                                        00610000
         L     R7,PCBUSER         ADDRESS OF IUSER BLOCK                00620000
         USING IUSER,R7           TEMP ADDRESSABILITY                   00630000
         L     R7,USRPROJ         PROJECT CONTROL AREA                  00640000
         USING IPROJ,R7           LIFE OF FUNCTION                      00650000
         STM   R14,R12,12(R13)    SAVE REGS FOR RS-EXP                  00660000
                                                                        00670000
         L     R4,=V(IMNTTAB)     ADDR OF TABLE LIST                    00680000
         USING MNTHDR,R4          ESTABLISH ADDRESSABILITY              00690000
         L     R3,MHDRCNT         GET COUNT OF ENTRIES                  00700000
         L     R4,MHDRFRST        ADDRESS OF FIRST ENTRY                00710000
         USING MNTTBL,R4          ESTABLISH ADDRESSABILITY              00720000
                                                                        00730000
TMNTNEXT DS    0H                                                       00740000
         CLC   MNTNAME,0(R5)      TABLE NAME MATCH                      00750000
         BE    TMNTSET            YES, SET MAINT MASK                   00760000
         LA    R4,MNTTBLN(,R4)    ADDR OF NEXT ENTRY                    00770000
         BCT   R3,TMNTNEXT        CHECK NEXT ENTRY                      00780000
         LA    R15,RC04           TABLE NOT FOUND                       00790000
         B     TMNTEXIT           RETURN                                00800000
                                                                        00810000
TMNTSET  DS    0H                                                       00820000
         RSEXP MNTFLGRS,SAVE=(R13)    ADDR OF CHANGE BYTE               00830000
         C     R15,=A(4096)       BASE ADDRESS AVAILABLE                00840000
         BL    *+10               NO, SKIP MASK SETTING                 00850000
         OC    0(1,R15),MNTMASK   SET CHANGE MASK                       00860000
         LA    R15,RC00           SET RETURN CODE                       00870000
                                                                        00880000
TMNTEXIT DS    0H                                                       00890000
         #EXIT ,                  RETURN                                00900000
                                                                        00910000
         EJECT ,                                                        00920000
****************************************************************        00930000
*                                                                       00940000
*  LITERALS, CONSTANTS AND MAPPINGS                                     00950000
*                                                                       00960000
****************************************************************        00970000
                                                                        00980000
         LTORG ,                                                        00990000
                                                                        01000000
         PRINT NOGEN                                                    01010000
         ICVT  ,                                                        01020000
         ITASK ,                                                        01030000
         IPCB  ,                                                        01040000
         IUSER ,                                                        01050000
         IPROJ ,                                                        01060000
         PRINT GEN                                                      01070000
         END                                                            01080000
