IL62ARSL TITLE 'INTEGRATOR - LU6.2 RESET SESSION LIMIT'                 00010000
                                                                        00020000
         PRINT NOGEN                                                    00030000
         CMINCL ,                 INTEGRATOR CPI-C DEFINITIONS          00040000
         L62INCL ,                INTEGRATOR LU6.2 DEFINITIONS          00050000
         PRINT GEN                                                      00060000
                                                                        00070000
**<DOC-ON>************************************************************* 00080000
*                                                                       00090000
* ROUTINE: IL62ARSL - LU6.2 RESET SESSION LIMIT                         00100000
*                                                                       00110000
* DESCRIPTION:                                                          00120000
*                                                                       00130000
*    THIS ROUTINE IS CALLED TO NEGOTIATE A RESET TO EXISTING SESSION    00140000
*    LIMITS.                                                            00150000
*                                                                       00160000
* ON ENTRY:                                                             00170000
*                                                                       00180000
*    R15 = ENTRY POINT ADDRESS                                          00190000
*    R14 = RETURN      ADDRESS                                          00200000
*    R13 = SAVE AREA   ADDRESS                                          00210000
*    R01 = PARM LIST   ADDRESS                                          00220000
*                                                                       00230000
*          +00 = ADDRESS OF LUCB (IACB)                                 00240000
*          +04 = ADDRESS OF PARTNER LU NAME (8 CHARACTERS, BLANK PAD)   00250000
*          +08 = ADDRESS OF MODE NAME (8 CHARACTERS, BLANK PAD)         00260000
*                (IGNORED IF "ALL" IS SPECIFIED)                        00270000
*          +0C = ADDRESS OF REPSONSIBLE                                 00280000
*          +10 = ADDRESS OF DRAIN_SOURCE                                00290000
*          +14 = ADDRESS OF DRAIN_TARGET                                00300000
*          +18 = ADDRESS OF SINGLE/ALL SPECIFICATION                    00310000
*          +1C = ADDRESS OF RETURN CODE AREA                            00320000
*                                                                       00330000
* ON EXIT:                                                              00340000
*                                                                       00350000
*    R15 = 0                                                            00360000
*                                                                       00370000
*    RETURN_CODE = LU62_OK --> ACCEPTED                                 00380000
*                                                                       00390000
*                = LU62_PARAMETER_ERROR --> BAD PARAMETER               00400000
*                = LU62_OPERATION_NOT_ACCEPTED --> RACE CONDITION       00410000
*                = LU62_PRODUCT_SPECIFIC_ERROR --> INTERNAL FAILURE     00420000
*                                                                       00430000
**<DOC-OFF>************************************************************ 00440000
         EJECT ,                                                        00450000
*********************************************************************** 00460000
*                                                                       00470000
* MAINTENANCE:                                                          00480000
*                                                                       00490000
*   10/01/94 RANDY WITEK                                                00500000
*                                                                       00510000
*********************************************************************** 00520000
                                                                        00530000
         EQUS  ,                  GENERAL EQUATES                       00540000
                                                                        00550000
RICVT    EQU   R11                                                      00560000
RITASK   EQU   R10                                                      00570000
RBASE    EQU   R9                                                       00580000
RIVTAM   EQU   R8                                                       00590000
RIACB    EQU   R7                                                       00600000
RIVUSER  EQU   R6                                                       00610000
RMDE     EQU   R5                                                       00620000
RPLIST   EQU   R4                                                       00630000
                                                                        00640000
         USING ICVT,RICVT         ESTABLISH ADDRESSABILITY              00650000
         USING ITASK,RITASK       ESTABLISH ADDRESSABILITY              00660000
         USING IVTAMCVT,RIVTAM    ESTABLISH ADDRESSABILITY              00670000
         USING IACB,RIACB         ESTABLISH ADDRESSABILITY              00680000
         USING IVUSER,RIVUSER     ESTABLISH ADDRESSABILITY              00690000
         USING MDE,RMDE           ESTABLISH ADDRESSABILITY              00700000
         USING L62LIST,RPLIST     ESTABLISH ADDRESSABILITY              00710000
                                                                        00720000
         COPY  CRAB               "C" RUNTIME ANCHOR BLOCK              00730000
         USING CRAB,R12           ADDRESSABILITY                        00740000
                                                                        00750000
         COPY  DSA                DYNAMIC SAVE AREA                     00760000
WORKAREA DS    0H                 READ/WRITE WORKAREA                   00770000
WRK256   DS    XL256              GENERAL WORKAREA                      00780000
L62MFL   L62DSPL MF=L             PLIST CONSTRUCTION                    00790000
L62RETCD DS    F                  LU6.2 RETURN CODE AREA                00800000
L62RETPB DS    A                  LU6.2 PLB ADDRESS RETURN AREA         00810000
L62RETMD DS    A                  LU6.2 MDE ADDRESS RETURN AREA         00820000
SUB0SAVE DS    18F                SUBROUTINE SAVE AREA                  00830000
PARTNM   DS    CL8                COPY OF PARTNER LUNAME                00840000
MODENM   DS    CL8                COPY OF MODE NAME                     00850000
RETCODE  DS    F                  TEMPORARY RETURN CODE AREA            00860000
RESP     DS    C                  COPY OF "RESPONSIBLE"                 00870000
DRAINS   DS    C                  COPY OF "DRAIN_SOURCE"                00880000
DRAINT   DS    C                  COPY OF "DRAIN_TARGET"                00890000
ALL      DS    C                  COPY OF "SINGLE/ALL"                  00900000
FLAG     DS    X                                                        00910000
FLAGLOCK EQU   X'80'                                                    00920000
FLAGLCKD EQU   X'40'                                                    00930000
WORKLEN  EQU   *-WORKAREA         LENGTH OF USER DSA AREA               00940000
DSALEN   EQU   *-DSA              LENGTH OF DSA                         00950000
                                                                        00960000
         $MSGDFT PREFIX=ICTPID,                                        +00970000
               COMPID='L62',                                           +00980000
               TABLE=*#MSGS,                                           +00990000
               WORKA=0,                                                +01000000
               MF=(E,WRK256),                                          +01010000
               PRINT=NOGEN                                              01020000
                                                                        01030000
IL6ARSL@ CSECT ,                                                        01040000
IL62ARSL CENTRY DSA=DSALEN,BASE=RBASE,INDEP=YES                         01050000
                                                                        01060000
         USING DSA,R13            ADDRESSABILITY                        01070000
         LR    RPLIST,R1          SAVE ADDRESS OF PLIST                 01080000
                                                                        01090000
         LA    R0,WORKAREA        ADDRESS OF USER DSA SECTION           01100000
         LA    R1,WORKLEN         LENGTH  OF USER DSA SECTION           01110000
         SR    R15,R15            PREPARE FOR CLEAR                     01120000
         MVCL  R0,R14             CLEAR USER DSA SECTION                01130000
                                                                        01140000
*---------------------------------------------------------------------- 01150000
* INITIALIZATION                                                        01160000
*---------------------------------------------------------------------- 01170000
                                                                        01180000
         @RESTENV ,               ENSURE ENVIRONMENT                    01190000
                                                                        01200000
         L     RIVTAM,ICTVTCVT    ESTABLISH IVTAMCVT POINTER            01210000
         USING IVTAMCVT,RIVTAM    ADDRESSABILITY                        01220000
         L     RIACB,L62PARM1     LUCB ADDRESS                          01230000
         SR    RIVUSER,RIVUSER    NO PLB YET                            01240000
         L     R1,L62PARM2        PARTNER LU NAME ADDRESS               01250000
         MVC   PARTNM,0(R1)       COPY PARTNER LU NAME                  01260000
         L     R1,L62PARM4        RESPONSIBLE                           01270000
         MVC   RESP,0(R1)         COPY                                  01280000
         L     R1,L62PARM5        DRAIN_SOURCE                          01290000
         MVC   DRAINS,0(R1)       COPY                                  01300000
         L     R1,L62PARM6        DRAIN_TARGET                          01310000
         MVC   DRAINT,0(R1)       COPY                                  01320000
         L     R1,L62PARM7        SINGLE/ALL                            01330000
         MVC   ALL,0(R1)          COPY                                  01340000
         MVC   MODENM,=CL8'ALLMODES'                                    01350000
         CLI   ALL,C'A'           WAS ALL SPECIFIED?                    01360000
         BE    COPYDONE           BRANCH IF YES                         01370000
         L     R1,L62PARM3        MODE NAME ADDRESS                     01380000
         MVC   MODENM,0(R1)       COPY MODE NAME                        01390000
                                                                        01400000
COPYDONE DS    0H                                                       01410000
                                                                        01420000
*---------------------------------------------------------------------- 01430000
* ENTRY TRACE                                                           01440000
*---------------------------------------------------------------------- 01450000
                                                                        01460000
         $TRACE *=A(TRC_LU62_IL62ARSL),80 TRACE ENTRY W/ 80 USER BYTES  01470000
         BNZ   NOETRACE                   BRANCH IF NOT TRACING         01480000
         $APITRC IL62ARSL                 TRACE COMMON STUFF            01490000
         ST    RPLIST,24(,R1)             TRACE PARMLIST ADDRESS        01500000
         ST    RIACB,28(,R1)              TRACE IACB     ADDRESS        01510000
         LTR   RIACB,RIACB                IS IACB POINTER OK?           01520000
         BZ    *+10                       BRANCH IF NOT                 01530000
         MVC   32(8,R1),IACNAME           TRACE LOCAL LU NAME           01540000
         MVC   40(8,R1),PARTNM            TRACE PARTNER LU NAME         01550000
         MVC   48(8,R1),MODENM            TRACE MODE NAME               01560000
         MVC   56(1,R1),RESP              TRACE RESPONSIBLE             01570000
         MVC   57(1,R1),DRAINS            TRACE DRAIN_SOURCE            01580000
         MVC   58(1,R1),DRAINT            TRACE DRAIN_TARGET            01590000
         MVC   59(1,R1),ALL               TRACE SINGLE/ALL              01600000
NOETRACE DS    0H                                                       01610000
                                                                        01620000
*---------------------------------------------------------------------- 01630000
* LOCATE THE SPECIFIED PARTNER LU                                       01640000
*---------------------------------------------------------------------- 01650000
                                                                        01660000
         LTR   RIACB,RIACB        DO WE HAVE AN IACB POINTER?           01670000
         BNP   ERRPARM            BRANCH IF NOT                         01680000
         CLC   IACID,=CL8'IACB'   IS THE ID CORRECT?                    01690000
         BNE   ERRPARM            BRANCH IF NOT                         01700000
                                                                        01710000
         BAS   R14,VTAMLOCK       SERIALIZE                             01720000
                                                                        01730000
         L62DSPL (RIACB),         LOCAL LU ADDRESS                     +01740000
               PARTNM,            PARTNER LU NAME ADDRESS              +01750000
               =F'8',             PARTNER LU NAME LENGTH ADDRESS       +01760000
               L62RETPB,          PLB ADDRESS RETURN AREA              +01770000
               L62RETCD,          RETURN CODE AREA                     +01780000
               MF=(E,L62MFL)                                            01790000
                                                                        01800000
         OC    L62RETCD,L62RETCD   DOES PARTNER LU EXIST?               01810000
         BNZ   ERRPARM             BRANCH IF NOT                        01820000
         ICM   RIVUSER,15,L62RETPB RETURNED PLB OF PARTNER LU           01830000
         BNP   ERRPROD             BRANCH IF DOESN'T LOOK GOOD          01840000
         TM    IVUF1,IVUF1PSC      IS PARTNER PARALLEL?                 01850000
         BNO   ERROPER             BRANCH IF NOT...CAN'T DO             01860000
                                                                        01870000
*---------------------------------------------------------------------- 01880000
* VALIDATE RESPONSIBILITY                                               01890000
*---------------------------------------------------------------------- 01900000
                                                                        01910000
         CLI   RESP,C'S'          "SOURCE" SPECIFIED?                   01920000
         BE    RESPOK             BRANCH IF YES                         01930000
         CLI   RESP,C'T'          "TARGET" SPECIFIED?                   01940000
         BNE   ERRPARM            BRANCH IF NOT                         01950000
                                                                        01960000
RESPOK   DS    0H                                                       01970000
                                                                        01980000
*---------------------------------------------------------------------- 01990000
* VALIDATE DRAIN_SOURCE                                                 02000000
*---------------------------------------------------------------------- 02010000
                                                                        02020000
         CLI   DRAINS,C'Y'        "YES" SPECIFIED?                      02030000
         BE    DRAINSOK           BRANCH IF YES                         02040000
         CLI   DRAINS,C'N'        "NO" SPECIFIED?                       02050000
         BNE   ERRPARM            BRANCH IF NOT                         02060000
                                                                        02070000
DRAINSOK DS    0H                                                       02080000
                                                                        02090000
*---------------------------------------------------------------------- 02100000
* VALIDATE DRAIN_TARGET                                                 02110000
*---------------------------------------------------------------------- 02120000
                                                                        02130000
         CLI   DRAINT,C'Y'        "YES" SPECIFIED?                      02140000
         BE    DRAINTOK           BRANCH IF YES                         02150000
         CLI   DRAINT,C'N'        "NO" SPECIFIED?                       02160000
         BNE   ERRPARM            BRANCH IF NOT                         02170000
                                                                        02180000
DRAINTOK DS    0H                                                       02190000
                                                                        02200000
*---------------------------------------------------------------------- 02210000
* VALIDATE SINGLE/ALL                                                   02220000
*---------------------------------------------------------------------- 02230000
                                                                        02240000
         CLI   ALL,C'S'           "SINGLE" SPECIFIED?                   02250000
         BE    ALLOK              BRANCH IF YES                         02260000
         CLI   ALL,C'A'           "ALL" SPECIFIED?                      02270000
         BNE   ERRPARM            BRANCH IF NOT                         02280000
                                                                        02290000
ALLOK    DS    0H                                                       02300000
                                                                        02310000
*---------------------------------------------------------------------- 02320000
* SINGLE MODE - LOCATE THE SPECIFIED MODE NAME                          02330000
*---------------------------------------------------------------------- 02340000
                                                                        02350000
         CLI   ALL,C'A'           ALL MODES SPECIFIED?                  02360000
         BE    DOEMALL            BRANCH IF YES                         02370000
                                                                        02380000
         CLC   MODENM,=CL8'SNASVCMG'                                    02390000
         BE    ERROPER            NOT VALID FOR THIS MODENAME           02400000
                                                                        02410000
         L62DSMD (RIVUSER),       PARTNER_LU ADDRESS                   +02420000
               MODENM,            MODE NAME ADDRESS                    +02430000
               =F'8',             MODE NAME LENGTH ADDRESS             +02440000
               L62RETMD,          MDE ADDRESS RETURN AREA              +02450000
               L62RETCD,          RETURN CODE AREA                     +02460000
               MF=(E,L62MFL)                                            02470000
                                                                        02480000
         OC    L62RETCD,L62RETCD  GOOD RETURN CODE?                     02490000
         BNZ   ERRPARM            BRANCH IF NOT, BAD MODE NAME          02500000
         ICM   RMDE,15,L62RETMD   GET MDE ADDRESS                       02510000
         BNP   ERRPROD            EXIT IF IT LOOKS BAD                  02520000
                                                                        02530000
         TM    MDEF1,MDEF1WSS     WAITING FOR SNASVCMG SESSION?         02540000
         BO    ERROPER            BRANCH IF YES                         02550000
         TM    MDEF1,MDEF1CNI     NEGOTIATION IN PROGRESS?              02560000
         BO    ERROPER            BRANCH IF YES                         02570000
         OI    MDEF1,MDEF1CNI     SHOW NEGOTIATION IN PROGRESS          02580000
         B     QUEUEIT            BRANCH IF MODE IS READY TO BE RESET   02590000
                                                                        02600000
*---------------------------------------------------------------------- 02610000
* ALL MODES - CHECK AND SET ALL MODE BLOCKS                             02620000
*---------------------------------------------------------------------- 02630000
                                                                        02640000
DOEMALL  DS    0H                                                       02650000
                                                                        02660000
         LA    RMDE,IVUMD1ST      GET SET TO RUN MODE_LIST              02670000
         S     RMDE,=A(MDENEXT-MDE)                                     02680000
MDERUN1  DS    0H                                                       02690000
         ICM   RMDE,15,MDENEXT    LINK TO THE NEXT MDE                  02700000
         BM    ENDRUN1            BRANCH IF END                         02710000
         TM    MDEF1,MDEF1WSS     WAITING FOR SNASVCMG SESSION?         02720000
         BO    ERROPER            BRANCH IF YES, CAN'T DO ALL           02730000
         TM    MDEF1,MDEF1CNI     NEGOTIATION IN PROGRESS?              02740000
         BO    ERROPER            BRANCH IF YES, CAN'T DO ALL           02750000
         B     MDERUN1            RUN ALL MODES                         02760000
ENDRUN1  DS    0H                                                       02770000
                                                                        02780000
         LA    RMDE,IVUMD1ST      GET SET TO RUN MODE_LIST              02790000
         S     RMDE,=A(MDENEXT-MDE)                                     02800000
MDERUN2  DS    0H                                                       02810000
         ICM   RMDE,15,MDENEXT    LINK TO THE NEXT MDE                  02820000
         BM    QUEUEIT            BRANCH IF END                         02830000
         CLC   MDENAME,=CL8'SNASVCMG'                                   02840000
         BE    MDERUN2            DON'T SET NEGOTIATION FOR THIS MODE   02850000
         OI    MDEF1,MDEF1CNI     SHOW NEGOTIATION IN PROGRESS          02860000
         B     MDERUN2            RUN ALL MODES                         02870000
                                                                        02880000
*---------------------------------------------------------------------- 02890000
* QUEUE WORK TO THE IVUSER                                              02900000
*---------------------------------------------------------------------- 02910000
                                                                        02920000
QUEUEIT  DS    0H                                                       02930000
                                                                        02940000
         $VTAMWE L'IWEYA,         LENGTH                               +02950000
               IWECSLIM           CODE                                  02960000
                                                                        02970000
X        USING IWEVTAM,R1                                               02980000
         OI    X.IYAF1,IYAF1RES   RESET SESSION LIMIT                   02990000
         MVC   X.IWEYANME,MODENM  PASS THE MODE NAME                    03000000
                                                                        03010000
         CLI   RESP,C'T'          RESPONSIBLE=TARGET?                   03020000
         BNE   *+8                BRANCH IF NOT                         03030000
         OI    X.IYAF1,IYAF1RSP   SET TARGET RESPONSIBILITY             03040000
                                                                        03050000
         CLI   DRAINS,C'Y'        DRAIN_SOURCE=YES?                     03060000
         BNE   *+8                BRANCH IF NOT                         03070000
         OI    X.IYAF1,IYAF1DRS   SHOW DRAIN_SOURCE=YES                 03080000
                                                                        03090000
         CLI   DRAINT,C'Y'        DRAIN_TARGET=YES?                     03100000
         BNE   *+8                BRANCH IF NOT                         03110000
         OI    X.IYAF1,IYAF1DRT   SHOW DRAIN_TARGET=YES                 03120000
                                                                        03130000
         CLI   ALL,C'A'           ALL MODES?                            03140000
         BNE   *+8                BRANCH IF NOT                         03150000
         OI    X.IYAF1,IYAF1ALL   SHOW ALL MODES                        03160000
         DROP  X                                                        03170000
                                                                        03180000
         LA    R0,IVUWEQ          QUEUE ADDRESS                         03190000
         BAS   R14,QWE            QUEUE THE WORK ELEMENT                03200000
         B     RETURN                                                   03210000
                                                                        03220000
*---------------------------------------------------------------------- 03230000
* EXCEPTION ROUTINES                                                    03240000
*---------------------------------------------------------------------- 03250000
                                                                        03260000
ERRPROD  DS    0H                                                       03270000
                                                                        03280000
         MVC   RETCODE,=A(LU62_PRODUCT_SPECIFIC_ERROR)                  03290000
         B     RETURN                                                   03300000
                                                                        03310000
ERRPARM  DS    0H                                                       03320000
                                                                        03330000
         MVC   RETCODE,=A(LU62_PARAMETER_ERROR)                         03340000
         B     RETURN                                                   03350000
                                                                        03360000
ERROPER  DS    0H                                                       03370000
                                                                        03380000
         MVC   RETCODE,=A(LU62_OPERATION_NOT_ACCEPTED)                  03390000
         B     RETURN                                                   03400000
                                                                        03410000
*---------------------------------------------------------------------- 03420000
* EXIT TRACE AND RETURN TO CALLER                                       03430000
*---------------------------------------------------------------------- 03440000
                                                                        03450000
RETURN   DS    0H                                                       03460000
                                                                        03470000
         BAS   R14,VTAMUNLK           RELEASE THE LOCK IF NECESSARY     03480000
                                                                        03490000
         $TRACE *=A(TRC_LU62_EXIT),16 TRACE ENTRY W/ 16 USER BYTES      03500000
         BNZ   NOXTRACE               BRANCH IF TRACING NOT AVAILABLE   03510000
         MVC   0(8,R1),=CL8'IL62ARSL' MODULE NAME                       03520000
         MVC   8(4,R1),RETCODE        RETURN_CODE VALUE                 03530000
NOXTRACE DS    0H                                                       03540000
                                                                        03550000
         L     R1,L62PARM8            ADDRESS OF RETURN_CODE AREA       03560000
         MVC   0(4,R1),RETCODE        SET RETURN_CODE VARIABLE          03570000
                                                                        03580000
         SR    R15,R15                FUNCTION RETURN CODE = 0          03590000
         CEXIT RC=(R15),INDEP=YES     RETURN                            03600000
                                                                        03610000
*---------------------------------------------------------------------- 03620000
* SUBROUTINE QWE - QUEUE A WORK ELEMENT TO A GIVEN WORK QUEUE           03630000
*                                                                       03640000
* ENTRY            R14 = RETURN ADDRESS                                 03650000
*                  R1  = WORK ELEMENT ADDRESS                           03660000
*                  R0  = QUEUE ADDRESS                                  03670000
*                                                                       03680000
* RETURNS          R15 = 0 --> QUEUEING WAS SUCCESSFUL                  03690000
*                      = 4 --> QUEUEING FAILED, WORK ELEMENT RELEASED   03700000
*---------------------------------------------------------------------- 03710000
                                                                        03720000
QWE      DS    0H                                                       03730000
                                                                        03740000
         STM   R14,R4,SUB0SAVE    SAVE REGISTERS                        03750000
         LR    R3,R0              SAVE QUEUE ADDRESS                    03760000
         LR    R4,R1              SAVE WORK ELEMENT ADDRESS             03770000
                                                                        03780000
         $VTAMQ (R4),             WORK ELEMENT                         +03790000
               (R3)               QUEUE                                 03800000
                                                                        03810000
         L     R14,SUB0SAVE       RESTORE REGISTERS                     03820000
         LM    R0,R4,SUB0SAVE+8   RESTORE REGISTERS                     03830000
         BR    R14                AND RETURN TO CALLER W/R15            03840000
                                                                        03850000
*---------------------------------------------------------------------- 03860000
*   SUBROUTINE: OBTAIN VTAM GLOBAL LOCK                                 03870000
*---------------------------------------------------------------------- 03880000
                                                                        03890000
VTAMLOCK DS    0H                                                       03900000
                                                                        03910000
         TM    FLAG,FLAGLOCK        WAS THE LOCK ALREADY OBTAINED?      03920000
         BOR   R14                  RETURN IF YES                       03930000
         STM   R14,R2,SUB0SAVE      SAVE CALLER'S REGISTERS             03940000
                                                                        03950000
         $SER  OBTAIN,                                                 +03960000
               VTAM                                                     03970000
                                                                        03980000
         C     R15,=F'4'            WAS LOCK ALREADY HELD?              03990000
         BNE   VTAMLOEX             BRANCH IF NOT                       04000000
         OI    FLAG,FLAGLCKD        REMEMBER LOCK HELD ON ENTRY         04010000
                                                                        04020000
VTAMLOEX DS    0H                                                       04030000
                                                                        04040000
         OI    FLAG,FLAGLOCK        REMEMBER LOCK IS HELD               04050000
         LM    R14,R2,SUB0SAVE      RESTORE CALLER'S REGISTERS          04060000
         BR    R14                  RETURN                              04070000
                                                                        04080000
*---------------------------------------------------------------------- 04090000
*   SUBROUTINE: RELEASE VTAM GLOBAL LOCK                                04100000
*---------------------------------------------------------------------- 04110000
                                                                        04120000
VTAMUNLK DS    0H                                                       04130000
                                                                        04140000
         TM    FLAG,FLAGLOCK        IS LOCK HELD?                       04150000
         BNOR  R14                  BRANCH IF NOT                       04160000
         TM    FLAG,FLAGLCKD        WAS LOCK HELD ON ENTRY?             04170000
         BOR   R14                  DON'T RELEASE IF IT WAS             04180000
         STM   R14,R2,SUB0SAVE      SAVE CALLER'S REGISTERS             04190000
                                                                        04200000
         $SER  RELEASE,                                                +04210000
               VTAM                                                     04220000
                                                                        04230000
         NI    FLAG,255-FLAGLOCK    SHOW LOCK NOT HELD                  04240000
         LM    R14,R2,SUB0SAVE      RESTORE CALLER'S REGISTERS          04250000
         BR    R14                  RETURN                              04260000
                                                                        04270000
*---------------------------------------------------------------------- 04280000
* ERROR ROUTINES                                                        04290000
*---------------------------------------------------------------------- 04300000
                                                                        04310000
*---------------------------------------------------------------------- 04320000
* LITERALS AND CONSTANTS                                                04330000
*---------------------------------------------------------------------- 04340000
                                                                        04350000
         LTORG ,                                                        04360000
                                                                        04370000
         PRINT NOGEN                                                    04380000
         ISTDBIND ,               VTAM BIND IMAGE                       04390000
         IHAPSA ,                 MVS PREFIXED SAVE AREA                04400000
         IKJTCB ,                 MVS TASK CONTROL BLOCK                04410000
         TRACODES ,               INTEGRATOR TRACE CODE EQUATES         04420000
         ICVT  ,                  INTEGRATOR CVT                        04430000
         IVTAMCVT ,               INTEGRATOR VTAM CVT                   04440000
         ITASK ,                  INTEGRATOR TASK BLOCK                 04450000
         IPCB ,                   INTEGRATOR PROCESS BLOCK              04460000
         IACB ,                   INTEGRATOR VTAM ACB                   04470000
         ABCODES ,                INTEGRATOR $ABEND CODES               04480000
         EVCODES ,                INTEGRATOR EVENT CODES                04490000
         IVUSER ,                 INTEGRATOR VTAM USER BLOCK            04500000
         ISESS ,                  INTEGRATOR SESSION BLOCK              04510000
         IRPL ,                   INTEGRATOR VTAM RPL                   04520000
         IWEVTAM ,                INTEGRATOR VTAM WORK ELEMENT          04530000
         $TASK DSECT=YES          INTEGRATOR $TASK SERVICES             04540000
         $VTAM DSECT=YES          INTEGRATOR $VTAM SERVICES             04550000
         $RESMGR DSECT=YES        INTEGRATOR $RESMGR SERVICES           04560000
         END   ,                                                        04570000
