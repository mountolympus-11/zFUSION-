IRMXSTGT TITLE 'RESOUCE MANAGER EXIT - STORAGE POOL TERMINATION'        00010000
**<DOC-ON>******************************************************        00020000
*                                                                       00030000
* ROUTINE: IRMXSTGT - Resource manager exit rtn - STGTERM               00040000
*                                                                       00050000
* DESCRIPTION:                                                          00060000
*                                                                       00070000
*   The function of this routine is to release the storage              00080000
*   blocks associated with an independent storage pool.                 00090000
*                                                                       00100000
* ON ENTRY:                                                             00110000
*                                                                       00120000
*   R0 contains the address of the workunit                             00130000
*   R1 contains the address of the STGMGR queue header                  00140000
*                                                                       00150000
* ON EXIT:                                                              00160000
*                                                                       00170000
*   R15 contains one of the following return codes:                     00180000
*                                                                       00190000
*     RC00 - Normal completion                                          00200000
*                                                                       00210000
**<DOC-ON>******************************************************        00220000
                                                                        00230000
         EJECT ,                                                        00240000
****************************************************************        00250000
*                                                                       00260000
* MAINTENANCE:                                                          00270000
*                                                                       00280000
*   07/25/94  Ron Colmone         Par# 134222                           00290000
*             Initial version                                           00300000
*                                                                       00310000
****************************************************************        00320000
                                                                        00330000
         EJECT ,                                                        00340000
         EQUS  ,                  GENERATE EQUATES                      00350000
                                                                        00360000
         EJECT ,                                                        00370000
         #WORK ,                  READ/WRITE WORKAREA                   00380000
         #ENDWORK ,                                                     00390000
                                                                        00400000
         EJECT ,                                                        00410000
IRMXSTGT #ENTER BASE=R12,PREG=(R8,R9)                                   00420000
                                                                        00430000
         LTR   R8,R8              QH ADDRESS AVAILABLE                  00440000
         BZ    RETURN             NO, RETURN                            00450000
         ICM   R0,15,0(R8)        QH INITIALIZED?                       00460000
         BZ    RETURN             NO, SKIP FREE                         00470000
                                                                        00480000
         MVC   DWORD,0(R8)        ENSURE QH DOES NOT RESIDE WITHIN AN   00490000
*                                 ACQUIRED (STGGET'ED) EXTENT           00500000
                                                                        00510000
         STGTERM QH=DWORD         FREE STORAGE POOL                     00520000
                                                                        00530000
RETURN   DS    0H                                                       00540000
         LA    R15,RC00           NORMAL COMPLETION                     00550000
         #EXIT ,                  RETURN                                00560000
                                                                        00570000
         EJECT ,                                                        00580000
****************************************************************        00590000
*                                                                       00600000
*  LITERAL, CONSTANTS AND MAPPINGS                                      00610000
*                                                                       00620000
****************************************************************        00630000
                                                                        00640000
         LTORG ,                  LITERALS                              00650000
                                                                        00660000
         PRINT NOGEN                                                    00670000
         ICVT  ,                                                        00680000
         END   ,                                                        00690000
