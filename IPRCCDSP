IPRCCDSP TITLE '- PCB Resume ASYNC EPB RTN'                             00010000
**<DOC-ON>******************************************************        00020000
*                                                                       00030000
* ROUTINE: IPRCCDSP - PCB Resume ASYNC EPB Routine                      00040000
*                                                                       00050000
* DESCRIPTION:                                                          00060000
*                                                                       00070000
*    This routine is scheduled when the PCB dispatch EPB                00080000
*    is posted.  The primary function of this routine is                00090000
*    to enable the task manager dispatcher to ready the                 00100000
*    PCB if events have been posted to the workunit.                    00110000
*                                                                       00120000
* ON ENTRY:                                                             00130000
*                                                                       00140000
*    Upon entry to this routine the following register conventions      00150000
*    are observed:                                                      00160000
*                                                                       00170000
*        R0  - Event Completion code                                    00180000
*        R1  - IPCB address to Dispatch                                 00190000
*        R15 - Entry Address                                            00200000
*        R10 - ITASK Address                                            00210000
*        R11 - ICVT  Address                                            00220000
*                                                                       00230000
* ON EXIT:                                                              00240000
*                                                                       00250000
*    $TASK CALLDSP is user to return control to the TASKMGR.            00260000
*                                                                       00270000
* MODE:                                                                 00280000
*                                                                       00290000
*    TASK                                                               00300000
*    APF/NON-APF                                                        00310000
*    SUP/PROB                                                           00320000
*    AMODE 31, RMODE ANY                                                00330000
*                                                                       00340000
**<DOC-OFF>*****************************************************        00350000
                                                                        00360000
         EJECT ,                                                        00370000
****************************************************************        00380000
*                                                                       00390000
* MAINTENANCE:                                                          00400000
*                                                                       00410000
*   01/05/95 Ron Colmone          Par# 159456                           00420000
*            Initial Version                                            00430000
*                                                                       00440000
****************************************************************        00450000
         EJECT ,                                                        00460000
         $TASK DSECT=YES          TASK MANAGER PLIST                    00470000
                                                                        00480000
         EJECT ,                                                        00490000
         EVCODES ,                EVENT CODES                           00500000
                                                                        00510000
         EJECT ,                                                        00520000
         EQUS  ,                  GENERAL EQUATES                       00530000
                                                                        00540000
         EJECT ,                                                        00550000
IPRCCDSP CSECT ,                  TASK SHUTDOWN ASYNC RTN               00560000
         LR    R12,R15            ENTRY ADDRESS                         00570000
         USING IPRCCDSP,R12       ESTABLISH ADDRESSABILITY              00580000
         USING ITASK,R10          ESTABLISH ADDRESSABILITY              00590000
         USING ICVT,R11           ESTABLISH ADDRESSABILITY              00600000
                                                                        00610000
         @CPYRYT ,                COPYRIGHT                             00620000
                                                                        00630000
         LA    R13,TSKDSPSA       CALLDSP SAVEAREA                      00640000
         LR    R9,R1              ADDRESS OF DISP PCB                   00650000
         USING IPCB,R9            ADDRESSABILITY                        00660000
                                                                        00670000
         EJECT ,                                                        00680000
****************************************************************        00690000
*                                                                       00700000
*  PCB RESUME ASYNC EPB RTN                                             00710000
*                                                                       00720000
****************************************************************        00730000
                                                                        00740000
         $TASK SETEPB,            REESTABLISH DISPATCHER EPB           +00750000
               EPB=PCBDEPB,                                            +00760000
               ECODE=EC$EVNT,                                          +00770000
               PCB=IPCB,                                               +00780000
               RTN=*#PRCCDSP,                                          +00790000
               PARM=IPCB,                                              +00800000
               WORKA=*TSK@WRKA,                                        +00810000
               MF=(E,TSKT_MFL)                                          00820000
                                                                        00830000
         $TASK CALLDSP,           CALL TASKMGR DISPATCHER              +00840000
               WORKA=*TSK@WRKA,                                        +00850000
               MF=(E,TSKT_MFL)                                          00860000
                                                                        00870000
         EJECT ,                                                        00880000
****************************************************************        00890000
*                                                                       00900000
*  CONSTANTS AND LITERALS                                               00910000
*                                                                       00920000
****************************************************************        00930000
                                                                        00940000
         LTORG ,                                                        00950000
                                                                        00960000
         PRINT NOGEN                                                    00970000
         ICVT  ,                                                        00980000
         ITASK ,                                                        00990000
         IPCB  ,                                                        01000000
         PRINT GEN                                                      01010000
                                                                        01020000
         END   ,                                                        01030000
