IGETFNCA TITLE 'RETRIEVE REMOTE FUNCTION ADDRESS - ASM INTERFACE'       00010000
**<DOC-ON>******************************************************        00020000
*                                                                       00030000
* ROUTINE:  IGETFNCA - Retrieve remote function address                 00040000
*                                                                       00050000
*                                                                       00060000
* DESCRIPTION:                                                          00070000
*                                                                       00080000
*   This routine will locate and return the address of the              00090000
*   function pointer loaded during ICVT initialization. It is           00100000
*   identical to IGETFNCA but is intended for assembler                 00110000
*   language callers.                                                   00120000
*                                                                       00130000
*                                                                       00140000
* ENTRY:  Upon entry to this routine R1 contains the address            00150000
*         of a CL8 module entry point name                              00160000
*                                                                       00170000
*                                                                       00180000
* EXIT:   Upon return from this routine R15 will contain one            00190000
*         of the following values:                                      00200000
*                                                                       00210000
*             0 - Function not found                                    00220000
*            \0 - Address of Function pointer                           00230000
*                                                                       00240000
**<DOC-OFF>*****************************************************        00250000
                                                                        00260000
         EJECT ,                                                        00270000
****************************************************************        00280000
*                                                                       00290000
* MAINTENANCE:                                                          00300000
*                                                                       00310000
*   04/13/94 R. Turgeon                                                 00320000
*            Initial version                                            00330000
*                                                                       00340000
****************************************************************        00350000
                                                                        00360000
         EJECT                                                          00370000
         $MODNTRY TYPE=DSECT      MODULE TABLE MAPPING                  00380000
                                                                        00390000
         EJECT                                                          00400000
         EQUS  ,                  GENERAL EQUATES                       00410000
                                                                        00420000
         EJECT                                                          00430000
IGETFNCA #ENTER PREG=(R8),SAVE=NO                                       00440000
                                                                        00450000
         EJECT                                                          00460000
***************************************************************         00470000
*                                                                       00480000
*  LOCATE MODULE TABLE ENTRY CORR TO GIVEN ENTRY POINT NAME             00490000
*                                                                       00500000
***************************************************************         00510000
         L     R5,ICTMODT@        ADDRESS OF MODULE TABLE ORGIN         00520000
         USING MODHEAD,R5         TEMP ADDRESSABILITY                   00530000
                                                                        00540000
         L     R3,MODCOUNT        COUNT OF MODULE ENTRIES               00550000
         L     R5,MODFIRST        ADDRESS OF FIRST ENTRY                00560000
         USING MODNTRY,R5         ADDRESSABILITY                        00570000
                                                                        00580000
LOC_MOD  DS    0H                                                       00590000
         CLC   MODNAME,0(R8)      FUNCTION NAME MATCH?                  00600000
         BE    FUNCADDR           YES, RETRIEVE FUNCTION ADDRESS        00610000
         LA    R5,MODLENG(,R5)    ADDRESS OF NEXT ENTRY                 00620000
         BCT   R3,LOC_MOD         TRY NEXT MOD ENTRY                    00630000
                                                                        00640000
*--------------------------------------------------------------         00650000
*  FUNCTION NOT FOUND IN TABLE                                          00660000
*--------------------------------------------------------------         00670000
NOFUNC   DS    0H                                                       00680000
         LA    R15,0              FUNCTION NOT FOUND                    00690000
         B     RETURN             RETURN                                00700000
                                                                        00710000
*--------------------------------------------------------------         00720000
*  RETRIEVE FUNCTION REMOTE ADDRESS                                     00730000
*--------------------------------------------------------------         00740000
FUNCADDR DS    0H                                                       00750000
         LH    R1,MODOFFST        OFFSET TO MODULE IN MODTBL            00760000
         LA    R15,ICTMODTB(R1)   ADDRESS OF FUNCTION PTR               00770000
                                                                        00780000
*--------------------------------------------------------------         00790000
*  RETURN                                                               00800000
*--------------------------------------------------------------         00810000
RETURN   DS    0H                                                       00820000
         #EXIT ,                  RETURN                                00830000
                                                                        00840000
         EJECT                                                          00850000
****************************************************************        00860000
*                                                                       00870000
*  LITERALS AND CONSTANTS                                               00880000
*                                                                       00890000
****************************************************************        00900000
         LTORG ,                                                        00910000
                                                                        00920000
         PRINT NOGEN                                                    00930000
         ICVT  ,                                                        00940000
         ITASK ,                                                        00950000
         END   ,                                                        00960000
