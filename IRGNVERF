IRGNVERF TITLE 'IRGNVERF - IDENTIFY INSTANTIATED REGIONS'               00010000
**<DOC-ON>*****************************************************         00020000
*                                                                       00030000
* ROUTINE: IRGNVERF - IDENTIFY INSTANTIATD REGIONS                      00040000
*                                                                       00050000
* DESCRIPTION:                                                          00060000
*                                                                       00070000
*    THIS ROUTINE IS USED TO TAG THE REGION DEFINITIONS                 00080000
*    ASSOCIATED WITH A REGION INSTANCE TREE TO INDICATE THE             00090000
*    PRESENCE OR ABSENCE OF A REGION INSTANCE.                          00100000
*                                                                       00110000
*    RGNFLAG2 CONTAINS BITS USED TO TRACK REGION INSTANCES              00120000
*    ON A GIVEN SCREEN OR SCREEN SET.  RG2INST IS SET IF THE            00130000
*    GIVEN IMAGE CONTAINS AN INSTANCE OF THAT REGION.  THIS             00140000
*    BIT IS NOT RESET IN THIS ROUTINE AND CAN BE USED TO                00150000
*    DETERMINE IF A REGION INSTANCE OCCURS IN ANY MEMBER IMAGE          00160000
*    OF THE SCREEN SET.  RG2CURR IS SET TO INDICATE THAT THE            00170000
*    CURRENT IMAGE CONTAINS AN INSTANCE OF THE CORRESPONDING            00180000
*    REGION.  IT IS RESET AT THE BEGINNING OF EVERY CALL. ITS           00190000
*    USE IS LIMITTED TO DETERMINING WHETHER THE CURRENT IMAGE           00200000
*    CONTAINS AN INSTANCE OF A PARTICULAR REGION.                       00210000
*                                                                       00220000
*                                                                       00230000
* NOTES:                                                                00240000
*                                                                       00250000
*    NO SAVEAREA ALLOCATED                                              00260000
*                                                                       00270000
* ON ENTRY:                                                             00280000
*                                                                       00290000
*    R0 - ADDR OF REGION TREE ROOT ENTRY (RGNTRY)                       00300000
*    R1 - ADDR OF REGION INSTANCE TREE ROOT (RECENTRY)                  00310000
*                                                                       00320000
*                                                                       00330000
* ON EXIT:                                                              00340000
*                                                                       00350000
*    R15 CONTAINS ZERO                                                  00360000
*                                                                       00370000
**<DOC-OFF>****************************************************         00380000
                                                                        00390000
         EJECT ,                                                        00400000
***************************************************************         00410000
*                                                                       00420000
* MAINTENANCE:                                                          00430000
*                                                                       00440000
*   12/18/93  R. TURGEON                                                00450000
*             INITIAL VERSION                                           00460000
*                                                                       00470000
***************************************************************         00480000
                                                                        00490000
         EJECT ,                                                        00500000
         REGION ,                      REGION DEFINITIONS               00510000
                                                                        00520000
         EJECT ,                                                        00530000
         GEOMETRY ,                    POINTS, LINES, RECTANGLES        00540000
                                                                        00550000
         EJECT ,                                                        00560000
         DRAW  ,                       REGION INSTANCE GENERATOR        00570000
                                                                        00580000
         EJECT ,                                                        00590000
         EQUS  ,                       GENERAL EQUATES                  00600000
                                                                        00610000
         EJECT ,                                                        00620000
IRGNVERF #ENTER IRGNVERF,PREG=(R6,R5),SAVE=NO                           00630000
         USING ITASK,R10               STDENV                           00640000
                                                                        00650000
         USING RECENTRY,R6                                              00660000
         USING RGNTRY,R5                                                00670000
                                                                        00680000
*--------------------------------------------------------------         00690000
*   RESET ALL RGNFLAG.RG2CURR (THIS IMAGE) FLAGS                        00700000
*--------------------------------------------------------------         00710000
         LR    R4,R5                   PREPARE FOR REGION ENTRY SCAN    00720000
R        USING RGNTRY,R4               ROVING PTR                       00730000
                                                                        00740000
RESET    DS    0H                                                       00750000
         LTR   R4,R4                   END OF REGION ENTRIES?           00760000
         BZ    ERESET                  DONE HERE IF SO                  00770000
         NI    R.RGNFLAG2,FF-RG2CURR   RESET INST-ON-CURR-IMAGE FLAG    00780000
         L     R4,R.RGNNEXT            NEXT REGION, NO PARTICULAR ORDER 00790000
         B     RESET                   PROCESS ALL REGION ENTRIES       00800000
                                                                        00810000
ERESET   DS    0H                                                       00820000
                                                                        00830000
*--------------------------------------------------------------         00840000
*   RUN ALL RGN INSTANCES UPDATING REF FLAGS IN RGN DEFINITION          00850000
*--------------------------------------------------------------         00860000
         LR    R7,R6                   PREPARE FOR INSTANCE SCAN        00870000
I        USING RECENTRY,R7             ROVING PTR                       00880000
                                                                        00890000
TAGRGN   DS    0H                                                       00900000
         LTR   R7,R7                   END OF REGION INSTANCES?         00910000
         BZ    ETAGRGN                 DONE HERE IF SO                  00920000
         ICM   R4,15,I.RECRN           LOCATE CORRESPONDING RGN DEF     00930000
         BZ    *+8                     NO FORMAL DEFINITION             00940000
         OI    R.RGNFLAG2,RG2INST+RG2CURR                               00950000
         L     R7,I.RECNEXT            NEXT REGION INSTANCE (UNORDERED) 00960000
         B     TAGRGN                  PROCESS ALL REGION INSTANCES     00970000
                                                                        00980000
ETAGRGN  DS    0H                                                       00990000
         DROP  I,R                     RECENTRY, RGNTRY                 01000000
                                                                        01010000
*--------------------------------------------------------------         01020000
*   RETURN TO CALLER                                                    01030000
*--------------------------------------------------------------         01040000
         SR    R15,R15                 COMPLETION CODES NOT DEFINED     01050000
         #EXIT ,                                                        01060000
                                                                        01070000
         EJECT ,                                                        01080000
***************************************************************         01090000
*                                                                       01100000
*   LOCAL READ ONLY DATA AREAS, ETC.                                    01110000
*                                                                       01120000
***************************************************************         01130000
         LTORG ,                                                        01140000
                                                                        01150000
         PRINT OFF                                                      01160000
         ICVT  ,                                                        01170000
         ITASK ,                                                        01180000
                                                                        01190000
         END   ,                                                        01200000
