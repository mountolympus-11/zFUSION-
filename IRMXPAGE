IRMXPAGE TITLE 'RESOUCE MANAGER EXIT - FREE PCB PAGE ALIGN WORKAREA'    00010000
**<DOC-ON>******************************************************        00020000
*                                                                       00030000
* ROUTINE: IRMXPAGE - Resource manager exit rtn - Free PCBPAGE          00040000
*                                                                       00050000
* DESCRIPTION:                                                          00060000
*                                                                       00070000
*   The function of this routine is to release the page aligned         00080000
*   workarea anchored from the PCBPAGE word if it has been              00090000
*   previously allocated and not freed.                                 00100000
*                                                                       00110000
* ON ENTRY:                                                             00120000
*                                                                       00130000
*   R0 contains the address of the PCB being deleted                    00140000
*                                                                       00150000
* ON EXIT:                                                              00160000
*                                                                       00170000
*   R15 contains one of the following return codes:                     00180000
*                                                                       00190000
*     RC00 - Normal completion                                          00200000
*                                                                       00210000
**<DOC-ON>******************************************************        00220000
                                                                        00230000
         EJECT ,                                                        00240000
****************************************************************        00250000
*                                                                       00260000
* MAINTENANCE:                                                          00270000
*                                                                       00280000
*   08/11/93  Ron Colmone                                               00290000
*             Initial version                                           00300000
*                                                                       00310000
****************************************************************        00320000
                                                                        00330000
         EJECT ,                                                        00340000
         EQUS  ,                  GENERATE EQUATES                      00350000
                                                                        00360000
         EJECT ,                                                        00370000
         #WORK ,                  READ/WRITE WORKAREA                   00380000
         #ENDWORK ,                                                     00390000
                                                                        00400000
         EJECT ,                                                        00410000
IRMXPAGE #ENTER BASE=R12,PREG=(R8,R9)                                   00420000
                                                                        00430000
         USING IPCB,R9            IPCB ADDRESSABILITY                   00440000
                                                                        00450000
         ICM   R2,15,PCBPAGE      ADDRESS OF PAGE ALIGNED WORKAREA      00460000
         BZ    RETURN             RETURN                                00470000
                                                                        00480000
         STORAGE RELEASE,ADDR=(R2),LENGTH=4096                          00490000
                                                                        00500000
         XC    PCBPAGE,PCBPAGE    CLEAR WORKAREA ADDRESS                00510000
         XC    PCBRMPAG,PCBRMPAG  CLEAR IRMXPAGE RESMGR TOKEN           00520000
                                                                        00530000
RETURN   DS    0H                                                       00540000
         LA    R15,RC00           NORMAL COMPLETION                     00550000
         #EXIT ,                  RETURN                                00560000
                                                                        00570000
         EJECT ,                                                        00580000
****************************************************************        00590000
*                                                                       00600000
*  LITERAL, CONSTANTS  AND MAPPINGS                                     00610000
*                                                                       00620000
****************************************************************        00630000
                                                                        00640000
         LTORG ,                  LITERALS                              00650000
                                                                        00660000
         PRINT NOGEN                                                    00670000
         ICVT  ,                                                        00680000
         IPCB  ,                                                        00690000
         PRINT GEN                                                      00700000
                                                                        00710000
         END   ,                                                        00720000
