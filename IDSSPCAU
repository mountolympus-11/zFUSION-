IDSSPCAU TITLE 'DATASPACE SERVICES - RETURN ALLOCATION UNIT SIZE'       00010000
**<DOC-ON>*****************************************************         00020002
*                                                                       00030000
* ROUTINE: IDSSPCAU - RETURN ALLOCATION UNIT SIZE                       00040000
*                                                                       00050000
* ON ENTRY:                                                             00060000
*                                                                       00070000
*    R1 CONTAINS THE ADDRESS OF A PARAMETER LIST CONSTRUCTED            00080000
*       AS FOLLOWS:                                                     00090000
*                                                                       00100000
*          +00 - ADDRESS OF A $SPACE OR $OBJECT TOKEN                   00110000
*                                                                       00120000
* ON EXIT:                                                              00130000
*                                                                       00140000
*    R15 CONTAINS ZERO                                                  00150000
*    R1  CONTAINS THE SIZE OF AN ALLOCATION UNIT (ALU)                  00160000
*                                                                       00170000
**<DOC-OFF>****************************************************         00180002
                                                                        00190002
         EJECT                                                          00200000
         SPCBLOCK ,               $SPACE PREFIX                         00210000
                                                                        00220000
         EJECT                                                          00230000
         OIE ,                    OBJECT INDEX ENTRY                    00240000
                                                                        00250000
         EJECT                                                          00260000
         $TOKEN ,                 $SPACE / $OBJECT TOKEN                00270000
                                                                        00280000
         EJECT                                                          00290000
         SPCEQUS ,                SPACE MANAGEMENT CONSTANTS            00300000
                                                                        00310000
         EJECT                                                          00320000
         EQUS  LINKAGE=VCON                                             00330000
                                                                        00340000
         EJECT                                                          00350000
IDSSPCAU @ENTER ,                                                       00360000
                                                                        00370000
*--------------------------------------------------------------         00380000
*   ACQUIRE ALU SIZE FROM SPACE PREFIX                                  00390000
*--------------------------------------------------------------         00400000
         L     R1,0(,R1)          FETCH TOKEN                           00410000
         USING $TOKEN,R1          $SPACE / $OBJECT TOKEN FORMAT         00420000
                                                                        00430000
         LAM   R11,R11,$ALET      SPACE ALET                            00440000
         L     R11,$SPCBASE       SPACE ORIGIN ADDRESS                  00450000
         USING SPCBLOCK,R11       FORMAT OF ALU0                        00460000
                                                                        00470000
         L     R1,SPC_ALU_SIZE    SIZE OF AN ALU                        00480000
         DROP  R1,R11             $TOKEN, ALU0                          00490000
                                                                        00500000
*--------------------------------------------------------------         00510000
*   RETURN TO REQUESTER                                                 00520000
*--------------------------------------------------------------         00530000
         LA    R15,RC00           INDICATE SUCCESS                      00540000
         SR    R0,R0              REASON CODES NOT DEFINED              00550000
                                                                        00560000
         NOP   0                  XDC                                   00570000
         @EXIT ,                                                        00580000
                                                                        00590000
         EJECT                                                          00600000
***************************************************************         00610000
*                                                                       00620000
*   READ ONLY CONSTANTS, ETC.                                           00630000
*                                                                       00640000
***************************************************************         00650000
         LTORG ,                                                        00660000
         END   ,                                                        00670000
