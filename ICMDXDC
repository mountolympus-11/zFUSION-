ICMDXDC  TITLE '- INVOKE XDC'                                           00010000
**<DOC-ON>******************************************************        00020000
*                                                                       00030000
* ROUTINE: ICMDXDC  - INVOKE XDC                                        00040000
*                                                                       00050000
* DESCRIPTION:                                                          00060000
*                                                                       00070000
*    FOR DEBUGGING PURPOSES ONLY, THIS COMMAND CAN BE USED TO           00080000
*    ISSUE A #DIE, THEREBY PASSING CONTROL TO XDC.                      00090000
*                                                                       00100000
* ON ENTRY:                                                             00110000
*                                                                       00120000
*    R1 CONTAINS ADDR OF THE PARAMETER LIST MAPPED BY THE               00130000
*    CMDREQ DSECT.                                                      00140000
*                                                                       00150000
* ON EXIT:                                                              00160000
*                                                                       00170000
*    R15 CONTAINS ONE OF THE FOLLOWING COMMAND COMPLETIONS              00180000
*        DEFINED IN THE CMDCODES MACRO.                                 00190000
*                                                                       00200000
*        CCODE_NORESP    - REQUEST COMPLETED (NO RESPONSE)              00210000
*                                                                       00220000
**<DOC-OFF>*****************************************************        00230000
                                                                        00240000
         EJECT ,                                                        00250000
****************************************************************        00260000
*                                                                       00270000
* MAINTENANCE:                                                          00280000
*                                                                       00290000
*   10/19/94 R. TURGEON                                                 00300000
*            INITIAL VERSION                                            00310000
*                                                                       00320000
****************************************************************        00330000
                                                                        00340000
         EJECT ,                                                        00350000
         #WORK ,                  READ/WRITE WORKAREA                   00360000
                                                                        00370000
WRK256   DS    XL256              GENERAL PURPOSE WORKAREA              00380000
                                                                        00390000
         #ENDWORK                 END OF WORKAREA                       00400000
                                                                        00410000
         EJECT ,                                                        00420000
         CMDCODES ,               COMMAND CODES                         00430000
                                                                        00440000
         EJECT ,                                                        00450000
         CMDREQ ,                 COMMAND REQUEST MAPPING               00460000
                                                                        00470000
         EJECT ,                                                        00480000
         CCSUMRY ,                COMMAND CONTENT SUMMARY               00490000
                                                                        00500000
         EJECT ,                                                        00510000
         EQUS  ,                  GENERAL EQUATES                       00520000
                                                                        00530000
         $MSGDFT PREFIX=ICTPID,COMPID='CMD',TABLE=*#MSGS,              X00540000
               CONID=*CMRQCNID,CONNAME=CMRQCNAM,CART=CMRQCART,         X00550000
               DESTADD=*CMRQDMSK,                                      X00560000
               MSGQA=*CMRQMQA,STGQH=*CMRQSTGQ,                         X00570000
               MF=(E,WRK256),PRINT=NOGEN                                00580000
                                                                        00590000
         EJECT ,                                                        00600000
ICMDXDC  #ENTER BASE=R12,PREG=R8                                        00610000
                                                                        00620000
         USING ITASK,R10          STDENV                                00630000
         USING CMDREQ,R8          ADDRESSABILITY                        00640000
                                                                        00650000
         EJECT ,                                                        00660000
****************************************************************        00670000
*                                                                       00680000
*  INVOKE XDC IF AVAILABLE                                              00690000
*                                                                       00700000
****************************************************************        00710000
         TM    ICTSTAT2,ICT2$XDC  XDC AVAILABLE?                        00720000
         BO    TRAP2XDC           CAUSE TRANSFER OF CONTROL             00730000
                                                                        00740000
         $MSG  009                                                      00750000
                                                                        00760000
         B     RETURN                                                   00770000
                                                                        00780000
*---------------------------------------------------------------        00790000
*   INVOKE XDC VIA #DIE                                                 00800000
*---------------------------------------------------------------        00810000
TRAP2XDC DS    0H                                                       00820000
         DC    X'00DEAD',AL1(32),CL32'DEBUGGER CALLED BY COMMAND'       00830000
                                                                        00840000
*---------------------------------------------------------------        00850000
*   RETURN TO REQUESTER                                                 00860000
*---------------------------------------------------------------        00870000
RETURN   DS    0H                                                       00880000
         LA    R15,CCODE_NORESP   COMMAND COMPLETE                      00890000
                                                                        00900000
         #EXIT ,                  RETURN                                00910000
                                                                        00920000
         EJECT                                                          00930000
****************************************************************        00940000
*                                                                       00950000
*  CONSTANTS AND LITERALS                                               00960000
*                                                                       00970000
****************************************************************        00980000
         LTORG ,                                                        00990000
                                                                        01000000
         PRINT NOGEN                                                    01010000
         ICVT  ,                                                        01020000
         ITASK ,                                                        01030000
         END   ,                                                        01040000
